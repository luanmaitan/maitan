---
// src/layouts/Layout.astro
// Importando as fontes que instalamos
import "@fontsource/ibm-plex-sans";
import "@fontsource/ibm-plex-serif";
import "@fontsource/ibm-plex-mono";
import MobileMenu from "../components/MobileMenu.svelte";
import ThemeToggle from "../components/ThemeToggle.svelte";
import FooterInfo from "../components/FooterInfo.svelte";
import SpeedInsights from "@vercel/speed-insights/astro";

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html
	lang="pt-br"
	class="bg-neutral-50 text-neutral-900 antialiased scroll-smooth"
>
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Luan Maitan - Jardim Digital" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/jpeg" href="/favicon.jpg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<script is:inline>
			// Script para evitar flash de tema errado
			const theme = (() => {
				if (
					typeof localStorage !== "undefined" &&
					localStorage.getItem("theme")
				) {
					return localStorage.getItem("theme");
				}
				if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
					return "dark";
				}
				return "light";
			})();

			if (theme === "dark") {
				document.documentElement.classList.add("dark");
			} else {
				document.documentElement.classList.remove("dark");
			}

			window.localStorage.setItem("theme", theme);
		</script>
	</head>
	<body
		class="font-sans selection:bg-primary selection:text-white bg-neutral-50 dark:bg-neutral-900 dark:text-neutral-100 transition-colors duration-300 flex flex-col min-h-screen"
	>
		<!-- Header -->
		<header
			class="fixed top-0 left-0 w-full bg-neutral-50/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-800 z-50 px-6 py-4 flex justify-between items-center"
		>
			<a href="/" class="flex items-center gap-3 group">
				<img
					src="/luan_perfil.jpg"
					alt="Luan Maitan"
					class="w-10 h-10 rounded-full object-cover shadow-sm group-hover:scale-105 transition-transform"
				/>
				<div class="flex flex-col">
					<span
						class="font-bold text-neutral-900 dark:text-white tracking-tight leading-none"
						>Luan Maitan</span
					>
					<span
						class="text-[10px] text-neutral-500 dark:text-neutral-400 leading-none mt-1"
						>Jardim Digital & Laboratório Criativo</span
					>
				</div>
			</a>

			<!-- Desktop Nav -->
			<nav
				class="hidden md:flex items-center gap-6 text-sm font-medium text-neutral-600 dark:text-neutral-300"
			>
				<a
					href="/escritorio"
					class="hover:text-black dark:hover:text-white transition-colors"
					>escritório</a
				>
				<a
					href="/observatorio"
					class="hover:text-black dark:hover:text-white transition-colors"
					>observatório</a
				>
				<a
					href="/laboratorio"
					class="hover:text-black dark:hover:text-white transition-colors"
					>laboratório</a
				>
				<a
					href="/portfolio"
					class="hover:text-black dark:hover:text-white transition-colors"
					>portfólio</a
				>
				<a
					href="/projetos"
					class="hover:text-black dark:hover:text-white transition-colors"
					>projetos</a
				>
				<a
					href="/sobre"
					class="hover:text-black dark:hover:text-white transition-colors"
					>sobre</a
				>
			</nav>

			<div class="flex items-center gap-4">
				<ThemeToggle client:load />
				<div class="md:hidden">
					<MobileMenu client:load />
				</div>
			</div>
		</header>

		<!-- Main Content -->
		<main
			class:list={[
				"flex-1 w-full mx-auto p-8 pt-28 md:p-12 md:pt-32",
				Astro.slots.has("sidebar")
					? "max-w-7xl grid md:grid-cols-[200px_1fr] gap-12"
					: "max-w-5xl",
			]}
		>
			{
				Astro.slots.has("sidebar") && (
					<aside class="hidden md:block sticky top-32 h-fit space-y-8">
						<slot name="sidebar" />
					</aside>
				)
			}
			<div class="min-w-0">
				<slot />
			</div>
		</main>

		<!-- Footer -->
		<footer
			class="w-full border-t border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900 px-6 py-4 mt-auto"
		>
			<div
				class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-neutral-400 dark:text-neutral-500"
			>
				<!-- Left: Clock & Weather -->
				<div class="flex items-center gap-4">
					<FooterInfo client:load />
				</div>

				<!-- Right: Legal & Links -->
				<div class="flex items-center gap-4">
					<!-- CC BY-NC-SA Icons -->
					<a
						href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
						target="_blank"
						class="flex gap-1 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
						title="Creative Commons BY-NC-SA 4.0"
					>
						<!-- CC Circle -->
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-4 h-4"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							><circle cx="12" cy="12" r="10"></circle><path
								d="M10 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"
							></path><path
								d="M17 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"
							></path></svg
						>
						<!-- BY (Person) -->
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-4 h-4"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
							></path><circle cx="12" cy="7" r="4"></circle></svg
						>
						<!-- NC (Dollar Crossed) -->
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-4 h-4"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							><circle cx="12" cy="12" r="10"></circle><path
								d="M16 8l-8 8"></path><path
								d="M16.7 13A3 3 0 0 0 13 16.7"></path><path
								d="M7.3 11A3 3 0 0 0 11 7.3"></path></svg
						>
						<!-- SA (Loop/Refresh) -->
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-4 h-4"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							><path
								d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"
							></path><path d="M3 3v5h5"></path></svg
						>
					</a>

					<span class="text-neutral-300 dark:text-neutral-700">·</span
					>

					<!-- Policy -->
					<a
						href="/policy"
						class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
						title="Políticas"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="w-4 h-4"
							viewBox="0 0 24 24"
							fill="none"
							stroke="currentColor"
							stroke-width="2"
							stroke-linecap="round"
							stroke-linejoin="round"
							><path
								d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
							></path></svg
						>
					</a>

					<span class="text-neutral-300 dark:text-neutral-700">·</span
					>

					<a
						href="/colophon"
						class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
						>colophon</a
					>
				</div>
			</div>
		</footer>
	</body>
</html>

<style is:global>
	/* Carbon Design System Typography */
	
	/* Serif for editorial content */
	.prose {
		font-family: "IBM Plex Serif", serif;
	}
	
	/* Sans for UI */
	body {
		font-family: "IBM Plex Sans", sans-serif;
	}

	/* Mono for code */
	code, pre {
		font-family: "IBM Plex Mono", monospace;
	}

	/* Carbon Focus Styles */
	:focus-visible {
		outline: 2px solid #0f62fe;
		outline-offset: 2px;
	}

	/* Carbon Link Styles (underline) */
	a {
		text-decoration-thickness: 1px;
	}
	a:hover {
		text-decoration-thickness: 2px;
	}
</style>
