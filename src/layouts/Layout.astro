---
// src/layouts/Layout.astro
// Importando as fontes que instalamos
import "@fontsource/crimson-pro";
import MobileMenu from "../components/MobileMenu.svelte";
import ThemeToggle from "../components/ThemeToggle.svelte";
import SpeedInsights from "@vercel/speed-insights/astro";

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html
	lang="pt-br"
	class="bg-neutral-50 text-neutral-900 antialiased scroll-smooth"
>
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Luan Maitan - Jardim Digital" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<script is:inline>
			// Script para evitar flash de tema errado
			const theme = (() => {
				if (
					typeof localStorage !== "undefined" &&
					localStorage.getItem("theme")
				) {
					return localStorage.getItem("theme");
				}
				if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
					return "dark";
				}
				return "light";
			})();

			if (theme === "dark") {
				document.documentElement.classList.add("dark");
			} else {
				document.documentElement.classList.remove("dark");
			}

			window.localStorage.setItem("theme", theme);
		</script>
	</head>
	<body
		class="font-sans selection:bg-neutral-200 selection:text-black bg-neutral-50 dark:bg-neutral-900 dark:text-neutral-100 transition-colors duration-300"
	>
		<!-- Mobile Header -->
		<div
			class="md:hidden fixed top-0 left-0 w-full bg-neutral-50/90 dark:bg-neutral-900/90 backdrop-blur-md border-b border-neutral-200 dark:border-neutral-800 z-50 px-6 py-4 flex justify-between items-center"
		>
			<a href="/" class="flex items-center gap-3 group">
				<img
					src="/luan_perfil.jpg"
					alt="Luan Maitan"
					class="w-10 h-10 rounded-full object-cover shadow-sm group-hover:scale-105 transition-transform"
				/>
				<span
					class="font-bold text-neutral-900 dark:text-white tracking-tight"
					>Luan Maitan</span
				>
			</a>
			<div class="flex items-center gap-4">
				<ThemeToggle client:load />
				<MobileMenu client:load />
			</div>
		</div>

		<div class="min-h-screen md:flex">
			<!-- Desktop Sidebar -->
			<aside
				class="hidden md:flex flex-col justify-between w-72 h-screen fixed top-0 left-0 border-r border-neutral-200 dark:border-neutral-800 bg-neutral-50/80 dark:bg-neutral-900/80 backdrop-blur-sm p-8 z-50"
			>
				<div class="space-y-8">
					<a href="/" class="block group">
						<img
							src="/luan_perfil.jpg"
							alt="Luan Maitan"
							class="w-16 h-16 rounded-full object-cover shadow-sm group-hover:scale-105 transition-transform ring-2 ring-transparent group-hover:ring-neutral-200 dark:group-hover:ring-neutral-700"
						/>
					</a>

					<div>
						<h1
							class="font-bold text-lg tracking-tight text-neutral-900 dark:text-neutral-100"
						>
							Luan Maitan
						</h1>
						<p
							class="text-sm text-neutral-500 dark:text-neutral-400"
						>
							Jardim Digital &<br />Laboratório Criativo
						</p>
					</div>

					<nav
						class="flex flex-col space-y-3 text-sm font-medium text-neutral-600 dark:text-neutral-300 mt-8"
					>
						<a
							href="/notas"
							class="hover:text-black dark:hover:text-white transition-colors"
							>Notas</a
						>
						<a
							href="/projetos"
							class="hover:text-black dark:hover:text-white transition-colors"
							>Projetos</a
						>
						<a
							href="/filmes"
							class="hover:text-black dark:hover:text-white transition-colors"
							>Filmes</a
						>
						<a
							href="/livros"
							class="hover:text-black dark:hover:text-white transition-colors"
							>Livros</a
						>
						<a
							href="/links"
							class="hover:text-black dark:hover:text-white transition-colors"
							>Links</a
						>
					</nav>
				</div>

				<div
					class="text-xs text-neutral-400 dark:text-neutral-500 space-y-6"
				>
					<div class="flex flex-col gap-2">
						<a
							href="/sobre"
							class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
							>Sobre</a
						>
						<a
							href="/changelog"
							class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
							>Changelog</a
						>
						<a
							href="/colophon"
							class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
							>Colophon</a
						>
					</div>

					<div
						class="space-y-4 pt-4 border-t border-neutral-200 dark:border-neutral-800"
					>
						<div
							class="flex items-center gap-4 text-neutral-400 dark:text-neutral-500"
						>
							<!-- CC BY-NC-SA Icons -->
							<a
								href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
								target="_blank"
								class="flex gap-1 hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
								title="Creative Commons BY-NC-SA 4.0"
							>
								<!-- CC Circle -->
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><circle cx="12" cy="12" r="10"
									></circle><path
										d="M10 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"
									></path><path
										d="M17 9.3a2.8 2.8 0 0 0-3.5 1 3.1 3.1 0 0 0 0 3.4 2.7 2.7 0 0 0 3.5 1"
									></path></svg
								>
								<!-- BY (Person) -->
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><path
										d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
									></path><circle cx="12" cy="7" r="4"
									></circle></svg
								>
								<!-- NC (Dollar Crossed) -->
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><circle cx="12" cy="12" r="10"
									></circle><path d="M16 8l-8 8"></path><path
										d="M16.7 13A3 3 0 0 0 13 16.7"
									></path><path d="M7.3 11A3 3 0 0 0 11 7.3"
									></path></svg
								>
								<!-- SA (Loop/Refresh) -->
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><path
										d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"
									></path><path d="M3 3v5h5"></path></svg
								>
							</a>

							<span class="text-neutral-300 dark:text-neutral-700"
								>·</span
							>

							<!-- Policy -->
							<a
								href="/policy"
								class="hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors"
								title="Políticas"
							>
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><path
										d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"
									></path></svg
								>
							</a>

							<span class="text-neutral-300 dark:text-neutral-700"
								>·</span
							>

							<!-- Wrote Words Link -->
							<a
								href="https://wrote.words.luanmaitan.com/"
								class="text-neutral-400 hover:text-black dark:hover:text-white transition-colors"
								title="Wrote Words"
								target="_blank"
							>
								<svg
									xmlns="http://www.w3.org/2000/svg"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="1.5"
									stroke-linecap="round"
									stroke-linejoin="round"
									class="w-4 h-4"
									><path
										d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
									></path><line x1="9" x2="15" y1="10" y2="10"
									></line><line
										x1="14"
										x2="15"
										y1="10"
										y2="10"></line></svg
								>
							</a>

							<span class="text-neutral-300 dark:text-neutral-700"
								>·</span
							>

							<!-- Wrote Words (Original Div, now removed as it's replaced by the link above) -->
							<div class="relative group cursor-default">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="w-4 h-4 text-neutral-400 dark:text-neutral-500"
									viewBox="0 0 24 24"
									fill="none"
									stroke="currentColor"
									stroke-width="2"
									stroke-linecap="round"
									stroke-linejoin="round"
									><line x1="21" y1="10" x2="3" y2="10"
									></line><line x1="21" y1="6" x2="3" y2="6"
									></line><line x1="21" y1="14" x2="3" y2="14"
									></line><line x1="21" y1="18" x2="3" y2="18"
									></line></svg
								>

								<!-- Tooltip -->
								<div
									class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-neutral-800 text-white text-[10px] font-mono rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none"
								>
									Wrote 6076 words
								</div>
							</div>
						</div>
					</div>
				</div>
			</aside>

			<!-- Main Content -->
			<main
				class="flex-1 md:ml-72 p-8 pt-24 md:p-20 max-w-3xl mx-auto w-full relative"
			>
				<!-- Desktop Theme Toggle -->
				<div class="hidden md:block absolute top-8 right-8">
					<ThemeToggle client:load />
				</div>
				<slot />
			</main>
		</div>
	</body>
</html>

<style is:global>
	/* Definindo a fonte Serif apenas para textos longos/corpo */
	.prose {
		font-family: "Crimson Pro", serif;
	}
	/* Definindo a fonte Sans para UI (Sidebar, menus) */
	body {
		font-family: "Inter", sans-serif;
	}
</style>
